(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{50:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(13),i=a.n(r),l=(a(50),a(7)),c=a(8),o=a(10),u=a(9),p=(a(28),a(5)),h=a.n(p),d=a(17),m=a(16),y=a(18),k=a.n(y),g=a(41),v=a.n(g),f=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){for(var e=this,t=[],a=function(a){e.props.playlists[a].owner.uri===e.props.userUri&&t.push(s.a.createElement("button",{className:"list-group-item list-group-item-action ".concat(e.props.playlists[a].selected?"active":""),key:a,onClick:Object(d.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.handleClick(a);case 2:case"end":return t.stop()}}),t)})))},e.props.playlists[a].name))},n=0;n<this.props.playlists.length;n++)a(n);return s.a.createElement("div",{style:{display:"flex",flexFlow:"column",height:"99vh",maxWidth:"20%",width:"20%"}},s.a.createElement("div",{style:{flex:"0 1 auto"},className:"sidebar-heading row text-center"},s.a.createElement("div",{className:"col-12",style:{paddingTop:"5px"}},s.a.createElement("b",null,"Select Playlists"))),s.a.createElement("ul",{className:"list-group list-group-flush",style:{overflow:"hidden",overflowY:"scroll",flex:"1 1 auto"}},t),s.a.createElement("div",{id:"sidebarFooter",style:{flex:"0 1 134px"}},s.a.createElement("div",{style:{maxHeight:"80px"}},s.a.createElement("img",{src:this.props.currentTrack?this.props.currentTrack.album.images[1].url:"",alt:"",style:{float:"left",width:"80px",height:"80px"}}),s.a.createElement("div",{style:{float:"left",marginLeft:"12px",marginTop:"12px",maxWidth:"65%",maxHeight:"80px"}},s.a.createElement("p",{style:{overflow:"hidden",textOverflow:"ellipsis",maxHeight:"2rem",whiteSpace:"nowrap",marginBottom:"0"},datatoggle:"tooltip",title:this.props.currentTrack?this.props.currentTrack.name:""},s.a.createElement("b",null,this.props.currentTrack?this.props.currentTrack.name:"")),s.a.createElement("p",{style:{overflow:"hidden",textOverflow:"ellipsis",maxHeight:"2rem",whiteSpace:"nowrap",marginBottom:"0"},datatoggle:"tooltip",title:this.props.currentTrack?this.props.currentTrack.artists[0].name:""},this.props.currentTrack?this.props.currentTrack.artists[0].name:""))),s.a.createElement("audio",{id:"player",controls:!0,style:{width:"100%",marginBottom:"-7px"},src:this.props.currentTrack?this.props.currentTrack.preview_url:""})))}}]),a}(n.Component),b=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{});window.location.hash="";var T=b,E=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"selectTile",value:function(e){var t=this,a=this.props.playlists[e].uri;if(-1!==this.props.playlists[e].loadedTracks.map((function(e){return e.uri})).indexOf(this.props.currentTrack.uri)){var n={url:"https://api.spotify.com/v1/playlists/".concat(a.substring(a.lastIndexOf(":")+1),"/tracks"),method:"delete",headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+this.props.token},data:{tracks:[{uri:this.props.currentTrack.uri}]}};k()(n).then((function(a){t.props.updatePlaylistTracks(e,t.props.currentTrack)})).catch((function(e){alert("Error removing track"),console.log(e)}))}else k.a.post("https://api.spotify.com/v1/playlists/".concat(a.substring(a.lastIndexOf(":")+1),"/tracks?uris=").concat(this.props.currentTrack.uri),{},{headers:{Authorization:"Bearer "+this.props.token}}).then((function(a){t.props.updatePlaylistTracks(e,t.props.currentTrack)})).catch((function(e){alert("Error adding to playlist (might be full)"),console.log(e)}))}},{key:"render",value:function(){for(var e=this,t=[],a=function(a){if(e.props.playlists[a].selected){var n=-1!==e.props.playlists[a].loadedTracks.indexOf(e.props.currentTrack);t.push(s.a.createElement("button",{className:"list-group-item list-group-item-action btn btn-success text-center ".concat(n?"active":""),style:{height:"20vh",borderRadius:"5px"},key:a,onClick:function(){e.selectTile(a)}},e.props.playlists[a].name))}},n=0;n<this.props.playlists.length;n++)a(n);return s.a.createElement("div",{style:{margin:"10px"}},s.a.createElement("ul",{style:{paddingLeft:"0px",maxHeight:"800px",display:"grid",gap:"1rem",gridTemplateColumns:"1fr 1fr 1fr 1fr"}},t))}}]),a}(n.Component),x=["user-top-read","user-read-currently-playing","user-read-playback-state","playlist-read-private","user-library-read","playlist-modify-public","playlist-modify-private","playlist-read-collaborative"],w=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={token:null},n}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",null,null==this.state.token&&s.a.createElement("div",{className:"text-center",style:{marginTop:"30vh"}},s.a.createElement("h1",null,"Welcome to Quick Playlist Maker"),s.a.createElement("h4",null,"Quickly sort songs into playlists!"),s.a.createElement("p",null,"Use this web app to quickly add or remove songs to multiple spotify playlists."),s.a.createElement("p",null,"Login with Spotify to use"),s.a.createElement("div",{id:"loginBtnWrap"},s.a.createElement("a",{id:"loginBtn",className:"btn btn-success",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("4d244e522fb448278385d588637eaecd","&redirect_uri=").concat("https://lukelawso.github.io/quick-playlist-maker/","&scope=").concat(x.join("%20"),"&response_type=token&show_dialog=true")},"Login to Spotify"))))}}]),a}(n.Component),A=a(85),S=a(86),B=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement(A.a,{show:this.props.showHelp,onHide:this.props.handleClose},s.a.createElement(A.a.Header,{closeButton:!0},s.a.createElement(A.a.Title,null,"Quick Playlist Maker Help")),s.a.createElement(A.a.Body,null,"Welcome to Quick Playlist Maker. Use this web app to quickly add or remove songs to multiple spotify playlists.",s.a.createElement("br",null),s.a.createElement("br",null),"To use, start by choosing which playlists to want to be able to modify by clicking them on the sidebar. They will then show up as buttons in the center of the screen. To add the current song to a playlist click the button with the playlist name in the center of the screen. If a song is already in a given playlist, the button will show as green, and clicking the button again will remove the song.",s.a.createElement("br",null),s.a.createElement("br",null),"To move to the next song, click the green next button or press 'n'. Alternatively, you can change the number below the drop down to skip to a different location in the source playlist.",s.a.createElement("br",null),s.a.createElement("br",null),"By default, the app goes through all songs in the 'liked songs' playlist. You can change the source playlist using the drop down menu, this changes the queue of songs you go through as you hit the next button."),s.a.createElement(A.a.Footer,null,s.a.createElement(S.a,{variant:"primary",onClick:this.props.handleClose},"Close")))}}]),a}(n.Component),I=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this)).handleHelpClose=function(){return n.setState({showHelp:!1})},n.handleHelpShow=function(){return n.setState({showHelp:!0})},n.state={token:null,playlists:[],currentTrack:null,position:0,activeSourceIndex:0,loadingTracks:!1,userUri:null,showHelp:!1},n.handleClick=n.handleClick.bind(Object(m.a)(n)),n.updatePlaylistTracks=n.updatePlaylistTracks.bind(Object(m.a)(n)),n.changeSource=n.changeSource.bind(Object(m.a)(n)),n.posChanged=n.posChanged.bind(Object(m.a)(n)),n.handleHelpClose=n.handleHelpClose.bind(Object(m.a)(n)),n}return Object(c.a)(a,[{key:"getPlaylistSongs",value:function(){var e=Object(d.a)(h.a.mark((function e(t){var a,n,s,r=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:this.state.token,e.next=3,k.a.get(t,{headers:{Authorization:"Bearer "+a}});case 3:if(n=e.sent,s=n.data.items.map((function(e){return e.track})),!n.data.next){e.next=13;break}return e.t0=s,e.next=9,this.getPlaylistSongs(n.data.next,a);case 9:return e.t1=e.sent,e.abrupt("return",e.t0.concat.call(e.t0,e.t1));case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserPlaylists",value:function(){var e=Object(d.a)(h.a.mark((function e(t){var a,n,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:this.state.token,e.next=3,k.a.get(t,{headers:{Authorization:"Bearer "+a}});case 3:if(!(n=e.sent).data.next){e.next=12;break}return e.t0=n.data.items,e.next=8,this.getUserPlaylists(n.data.next,a);case 8:return e.t1=e.sent,e.abrupt("return",e.t0.concat.call(e.t0,e.t1));case 12:return e.abrupt("return",n.data.items);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleClick",value:function(){var e=Object(d.a)(h.a.mark((function e(t){var a,n,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.playlists[t].loadedTracks){e.next=10;break}return e.next=3,this.getPlaylistSongs(this.state.playlists[t].tracks.href);case 3:a=e.sent,(n=this.state.playlists)[t].loadedTracks=a,n[t].selected=!n[t].selected,this.setState({playlists:n}),e.next=13;break;case 10:(s=this.state.playlists)[t].selected=!s[t].selected,this.setState({playlists:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updatePlaylistTracks",value:function(e,t){var a=this.state.playlists,n=a[e].loadedTracks.indexOf(t);-1!==n?a[e].loadedTracks.splice(n,1):a[e].loadedTracks.push(t),this.setState({playlistTracks:a})}},{key:"componentDidMount",value:function(){var e=this;this.timer=null,document.addEventListener("keyup",(function(t){"KeyN"===t.code&&e.nextTrack()}));var t=T.access_token;t&&0===this.state.playlists.length&&this.getUserPlaylists("https://api.spotify.com/v1/me/playlists/?limit=50",t).then(function(){var a=Object(d.a)(h.a.mark((function a(n){var s,r,i;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,k.a.get("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer "+t}});case 2:return s=a.sent,e.setState({token:t,playlists:n,position:0,activeSourceIndex:0,loadingTracks:!0,userUri:s.data.uri}),a.next=6,e.getPlaylistSongs("https://api.spotify.com/v1/me/tracks?limit=50",t);case 6:r=a.sent,i={name:"Liked Songs",loadedTracks:r,uri:"likedSongs",owner:{uri:s.data.uri}},n.unshift(i),e.setState({playlists:n,currentTrack:r[0],loadingTracks:!1});case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}},{key:"nextTrack",value:function(){var e=this;this.state.position+1>=this.state.playlists[this.state.activeSourceIndex].loadedTracks.length?(document.getElementById("songQueuePlace").value=1,this.setState({position:0,currentTrack:this.state.playlists[this.state.activeSourceIndex].loadedTracks[0]})):this.setState({position:this.state.position+1,currentTrack:this.state.playlists[this.state.activeSourceIndex].loadedTracks[this.state.position+1]},(function(){document.getElementById("player").play().then((function(){return document.getElementById("songQueuePlace").value=e.state.position+1}))}))}},{key:"changeSource",value:function(){var e=Object(d.a)(h.a.mark((function e(t){var a,n,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.selectedIndex,this.state.playlists[a].loadedTracks){e.next=10;break}return e.next=4,this.getPlaylistSongs(this.state.playlists[a].tracks.href);case 4:n=e.sent,(s=this.state.playlists)[a].loadedTracks=n,this.setState({playlists:s,position:0,currentTrack:n[0],activeSourceIndex:a}),e.next=11;break;case 10:this.setState({position:0,currentTrack:this.state.playlists[a].loadedTracks[0],activeSourceIndex:a});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"posChanged",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){var t=document.getElementById("songQueuePlace").value-1;t<=0||t>e.state.playlists[e.state.activeSourceIndex].loadedTracks.length?(document.getElementById("songQueuePlace").value=1,e.setState({position:0,currentTrack:e.state.playlists[e.state.activeSourceIndex].loadedTracks[0]})):e.setState({position:t,currentTrack:e.state.playlists[e.state.activeSourceIndex].loadedTracks[t]})}),700)}},{key:"render",value:function(){var e,t=this;return e=this.state.playlists.length>0&&this.state.playlists[this.state.activeSourceIndex].loadedTracks?this.state.playlists[this.state.activeSourceIndex].loadedTracks.length:0,s.a.createElement("div",null,null!=this.state.token?s.a.createElement(v.a,{active:this.state.loadingTracks,spinner:!0,text:"Loading tracks..."},s.a.createElement("div",{className:"d-flex"},s.a.createElement(f,{playlists:this.state.playlists,handleClick:this.handleClick,currentTrack:this.state.currentTrack,userUri:this.state.userUri}),s.a.createElement("div",{className:"text-center",style:{width:"80%"}},s.a.createElement("div",null,s.a.createElement("button",{className:"btn btn-primary float-right",style:{marginRight:"5px",marginTop:"5px",overflow:"hidden"},onClick:this.handleHelpShow},"Help"),s.a.createElement("a",{className:"float-right",href:"https://github.com/lukelawso/quick-playlist-maker",title:"View on GitHub",style:{cursor:"pointer",marginRight:"5px",marginTop:"5px"}},s.a.createElement("img",{style:{height:"30px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTE3OEEyQTk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTE3OEEyQjk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTI4OTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTI5OTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+m4QGuQAAAyRJREFUeNrEl21ojWEYx895TDPbMNlBK46IUiNmPvHBSUjaqc0H8pF5+aDUKPEBqU2NhRQpX5Rv5jWlDIWlMCv7MMSWsWwmb3tpXub4XXWdPHvc9/Gc41nu+nedc7/8r/99PffLdYdDPsvkwsgkTBwsA/PADJCnzX2gHTwBt8Hl7p537/3whn04XoDZDcpBlk+9P8AFcAghzRkJwPF4zGGw0Y9QS0mAM2AnQj77FqCzrtcwB1Hk81SYojHK4DyGuQ6mhIIrBWB9Xm7ug/6B/nZrBHBegrkFxoVGpnwBMSLR9EcEcC4qb8pP14BWcBcUgewMnF3T34VqhWMFkThLJAalwnENOAKiHpJq1FZgI2AT6HZtuxZwR9GidSHtI30jOrbawxlVX78/AbNfhHlomEUJJI89O2MqeE79T8/nk8nMBm/dK576hZgmA3cp/R4l9/UeSxiHLVIlNm4nFfT0bxyuIj7LHRTKai+zdJobwMKzcZSJb0ePV5PKN+BqAAKE47UlMnERELMM3EdYP/yrd+XYb2mOiYBiQ8OQnoRBlXrl9JZix7D1pHTazu4MoyBcnYamqAjIMTR8G4FT8LuhLsexXYYjICBiqhQBvYb6fLZIJCjPypVvaOoVAW2WcasCnL2Nq82xHJNSqlCeFcDshaPK0twkAhosjZL31QYw+1rlMpWGMArl23SBsZZO58F2tlJXmjOXS+s4WGvpMiBJT/I2PInZ6lIs9/hBsNS1hS6BG0DSqmYEDRlCXQrmy50P1oDRKTSegmNbUsA0zDMwRhPJXeCE3vWLPQMvan6X8AgIa1vcR4AkGZkDR4ejJ1UHpsaVI0g2LInpOsNFUud1rhxSV+fzC9Woz2EZkWQuja7/B+jUrgtIMpy9YCW4n4K41YfzRneW5E1KJTe4B2Zq1Q5EHEtj4U3AfEzR5SVY4l7QYQPJdN2as7RKBF0BPZqqH4VgMAMBL8Byxr7y8zCZiDlnOcEKIPmUpgB5Z2ww5RdOiiRiNajUmWda5IG6WbhsyY2fx6m8gLcoJDJFkH219M3We1+cnda93pfycZpIJEL/s/wSYADmOAwAQgdpBAAAAABJRU5ErkJggg==",alt:""}))),s.a.createElement(B,{showHelp:this.state.showHelp,handleClose:this.handleHelpClose}),s.a.createElement("div",{className:"",id:"tileHeading",style:{paddingBottom:"10px"}},s.a.createElement("h3",{className:""},"Source Playlist"),s.a.createElement("div",null,s.a.createElement("select",{id:"sourcePlaylist",onChange:this.changeSource},this.state.playlists.map((function(e,t){return s.a.createElement("option",{key:t+1,value:e.name},e.name)}))),s.a.createElement("div",{className:"text-center"},s.a.createElement("input",{id:"songQueuePlace",type:"number",onChange:this.posChanged,style:{marginBottom:"8px",marginTop:"8px"},defaultValue:this.state.position+1}),s.a.createElement("p",{id:"songQueuePosition",style:{marginBottom:"0"}},"/ ",e)))),s.a.createElement(E,{playlists:this.state.playlists,handleTileClick:this.handleTileClick,currentTrack:this.state.currentTrack,token:this.state.token,updatePlaylistTracks:this.updatePlaylistTracks}),s.a.createElement("button",{id:"nextButton",className:"btn btn-success",onClick:function(){t.nextTrack()},style:{width:"80%",height:"10vh",marginLeft:"10px",marginRight:"10px"}},"Next (N)")))):s.a.createElement(w,null))}}]),a}(n.Component),j=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={playlists:[],token:null},n.access_token=null,n}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement(I,null)}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[82,1,2]]]);
//# sourceMappingURL=main.2ebca5fa.chunk.js.map